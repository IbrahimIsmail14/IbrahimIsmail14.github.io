<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Driving Empire Car Value List 3.0</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Teko:wght@500;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    
    <script>
        // Customizing Tailwind theme for our design
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Teko', 'sans-serif'],
                        digital: ['Orbitron', 'sans-serif'],
                    },
                    colors: {
                        'brand-primary': '#f04e23',
                        'brand-primary-hover': '#d43e12',
                        'brand-secondary': '#23a0f0',
                        'brand-accent': '#f5a623',
                        'gray': {
                            900: '#0a0a0a',
                            800: '#1a1a1a',
                            700: '#2c2c2c',
                            600: '#444444',
                            500: '#6b7280',
                            400: '#9ca3af',
                            300: '#d1d5db',
                            200: '#e5e7eb',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'gradient-x': 'gradient-x 8s ease infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        'gradient-x': {
                            '0%, 100%': {
                                'background-position': '0% 50%'
                            },
                            '50%': {
                                'background-position': '100% 50%'
                            }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #f04e23, #f5a623);
            border-radius: 10px;
            border: 2px solid #1a1a1a;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #d43e12, #e6951a);
        }

        /* Custom range slider */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 10px;
            background: #444;
            border-radius: 10px;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: #f04e23;
            cursor: pointer;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 0 10px rgba(240, 78, 35, 0.7);
            transition: all 0.2s;
        }
        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(240, 78, 35, 0.9);
        }

        /* Glow effect */
        .glow {
            text-shadow: 0 0 10px currentColor;
        }
        .glow-primary {
            text-shadow: 0 0 10px rgba(240, 78, 35, 0.7);
        }
        .glow-secondary {
            text-shadow: 0 0 10px rgba(35, 160, 240, 0.7);
        }

        /* Gradient text */
        .text-gradient {
            background: linear-gradient(90deg, #f04e23, #f5a623);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Card shine effect */
        .card-shine {
            position: relative;
            overflow: hidden;
        }
        .card-shine::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0) 30%,
                rgba(255, 255, 255, 0.05) 45%,
                rgba(255, 255, 255, 0.2) 50%,
                rgba(255, 255, 255, 0.05) 55%,
                rgba(255, 255, 255, 0) 70%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            animation: shine 3s infinite;
        }
        @keyframes shine {
            0% { transform: translateX(-100%) rotate(30deg); }
            100% { transform: translateX(100%) rotate(30deg); }
        }

        /* Tier badges */
        .tier-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
        }
        .tier-entry {
            background: linear-gradient(135deg, #6b7280, #9ca3af);
        }
        .tier-a {
            background: linear-gradient(135deg, #10b981, #34d399);
        }
        .tier-s {
            background: linear-gradient(135deg, #3b82f6, #93c5fd);
        }
        .tier-hypercar {
            background: linear-gradient(135deg, #8b5cf6, #c4b5fd);
        }
        .tier-ultra {
            background: linear-gradient(135deg, #f59e0b, #fcd34d);
            animation: pulse-slow 2s infinite;
        }

        /* Price tag effect */
        .price-tag {
            position: relative;
            display: inline-block;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #f04e23, #f5a623);
            color: white;
            font-weight: bold;
            border-radius: 0.25rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .price-tag::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            border-left: 10px solid #f5a623;
        }

        /* Table row hover effect */
        .table-row-hover {
            transition: all 0.3s ease;
            position: relative;
        }
        .table-row-hover::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #f04e23, #f5a623);
            transition: width 0.3s ease;
        }
        .table-row-hover:hover::after {
            width: 100%;
        }

        /* Custom checkbox */
        .custom-checkbox {
            position: relative;
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: #2c2c2c;
            border: 2px solid #6b7280;
            border-radius: 4px;
            transition: all 0.2s;
        }
        .custom-checkbox.checked {
            background-color: #f04e23;
            border-color: #f04e23;
        }
        .custom-checkbox.checked::after {
            content: '';
            position: absolute;
            left: 6px;
            top: 2px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        /* Digital speedometer */
        .speedometer {
            font-family: 'Orbitron', sans-serif;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            border: 1px solid rgba(35, 160, 240, 0.3);
            box-shadow: 0 0 15px rgba(35, 160, 240, 0.2) inset;
            color: #23a0f0;
            text-shadow: 0 0 5px rgba(35, 160, 240, 0.7);
        }
        
        /* Image hover zoom */
        .img-hover-zoom {
            overflow: hidden;
        }
        .img-hover-zoom img {
            transition: transform 0.5s ease;
        }
        .img-hover-zoom:hover img {
            transform: scale(1.05);
        }
        
        /* Neon border for ultra rare cars */
        .neon-border {
            box-shadow: 0 0 10px rgba(245, 166, 35, 0.5);
            position: relative;
        }
        .neon-border::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: inherit;
            background: linear-gradient(45deg, #ff00cc, #3333ff, #00ffcc, #ffcc00);
            background-size: 400% 400%;
            z-index: -1;
            animation: neon-border-animate 3s ease infinite;
            opacity: 0.7;
        }
        @keyframes neon-border-animate {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 font-sans antialiased min-h-screen">

<div class="container mx-auto p-4 md:p-8">

    <header class="text-center mb-12 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-gray-900/50 to-transparent z-0"></div>
        <div class="relative z-10">
            <h1 class="font-display text-5xl md:text-7xl font-bold text-gradient tracking-wider uppercase mb-2 animate__animated animate__fadeInDown">
                Driving Empire
            </h1>
            <p class="text-xl text-gray-400 mb-4 animate__animated animate__fadeIn animate__delay-1s">Ultimate Car Value Database</p>
            <div class="flex justify-center gap-4 animate__animated animate__fadeIn animate__delay-2s">
                <span class="px-3 py-1 bg-gray-800 rounded-full text-sm text-brand-primary border border-gray-700 flex items-center gap-1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    v3.0
                </span>
                <span class="px-3 py-1 bg-gray-800 rounded-full text-sm text-brand-secondary border border-gray-700 flex items-center gap-1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Live Data
                </span>
            </div>
        </div>
    </header>

    <section id="statsSection" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
        <div class="bg-gradient-to-br from-gray-800 to-gray-900 p-4 rounded-xl shadow-lg border border-gray-700 stat-item hover:border-brand-primary transition-all duration-300 transform hover:-translate-y-1">
            <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Visible Cars</h3>
            <p id="statVisibleCars" class="text-3xl font-bold text-white glow-primary">0</p>
            <div class="h-1 mt-2 bg-gradient-to-r from-brand-primary to-transparent rounded-full"></div>
        </div>
        <div class="bg-gradient-to-br from-gray-800 to-gray-900 p-4 rounded-xl shadow-lg border border-gray-700 stat-item hover:border-brand-primary transition-all duration-300 transform hover:-translate-y-1">
            <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Average Price</h3>
            <p id="statAvgPrice" class="text-3xl font-bold text-white glow">$0</p>
            <div class="h-1 mt-2 bg-gradient-to-r from-yellow-500 to-transparent rounded-full"></div>
        </div>
        <div class="bg-gradient-to-br from-gray-800 to-gray-900 p-4 rounded-xl shadow-lg border border-gray-700 stat-item hover:border-brand-primary transition-all duration-300 transform hover:-translate-y-1">
            <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Top Speed</h3>
            <p id="statTopSpeed" class="text-3xl font-bold text-brand-secondary glow-secondary">0 <span class="text-lg">mph</span></p>
            <div class="h-1 mt-2 bg-gradient-to-r from-brand-secondary to-transparent rounded-full"></div>
        </div>
        <div class="bg-gradient-to-br from-gray-800 to-gray-900 p-4 rounded-xl shadow-lg border border-gray-700 stat-item hover:border-brand-primary transition-all duration-300 transform hover:-translate-y-1">
            <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1">Quickest 0-60</h3>
            <p id="statQuickestAccel" class="text-3xl font-bold text-white glow">0<span class="text-lg">s</span></p>
            <div class="h-1 mt-2 bg-gradient-to-r from-green-500 to-transparent rounded-full"></div>
        </div>
    </section>

    <div class="bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl shadow-2xl mb-8 border border-gray-700">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4">
            <div class="relative xl:col-span-2">
                <input type="search" id="searchInput" placeholder="Search by name, brand or tier..." class="w-full bg-gray-700/50 border border-gray-600 rounded-xl py-3 pl-4 pr-10 text-white placeholder-gray-400 focus:ring-2 focus:ring-brand-primary focus:border-brand-primary transition duration-200 shadow-lg focus:shadow-brand-primary/20">
                <span class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </span>
            </div>
            <select id="manufacturerFilter" class="w-full bg-gray-700/50 border border-gray-600 rounded-xl py-3 px-4 text-white focus:ring-2 focus:ring-brand-primary focus:border-brand-primary transition duration-200 shadow-lg appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiAjd2hpdGUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0ibHVjaWRlIGx1Y2lkZS1jaGV2cm9uLWRvd24iPjxwYXRoIGQ9Im03IDE1IDUgNSA1LTUiLz48L3N2Zz4=')] bg-no-repeat bg-[center_right_1rem]">
                <option value="">All Manufacturers</option>
            </select>
            <select id="categoryFilter" class="w-full bg-gray-700/50 border border-gray-600 rounded-xl py-3 px-4 text-white focus:ring-2 focus:ring-brand-primary focus:border-brand-primary transition duration-200 shadow-lg appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiAjd2hpdGUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0ibHVjaWRlIGx1Y2lkZS1jaGV2cm9uLWRvd24iPjxwYXRoIGQ9Im03IDE1IDUgNSA1LTUiLz48L3N2Zz4=')] bg-no-repeat bg-[center_right_1rem]">
                <option value="">All Categories</option>
            </select>
            <select id="tierFilter" class="w-full bg-gray-700/50 border border-gray-600 rounded-xl py-3 px-4 text-white focus:ring-2 focus:ring-brand-primary focus:border-brand-primary transition duration-200 shadow-lg appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiAjd2hpdGUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0ibHVjaWRlIGx1Y2lkZS1jaGV2cm9uLWRvd24iPjxwYXRoIGQ9Im03IDE1IDUgNSA1LTUiLz48L3N2Zz4=')] bg-no-repeat bg-[center_right_1rem]">
                <option value="">All Tiers</option>
            </select>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-700/50">
            <div class="flex flex-col">
                <label for="priceRange" class="text-sm text-gray-400 mb-2 flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Max Price: <span id="priceValue" class="font-bold text-white ml-1">$20,000,000</span>
                </label>
                <input type="range" id="priceRange" min="0" max="20000000" step="10000" value="20000000" class="mt-1">
            </div>
            
            <div class="flex gap-4 items-end">
                <button id="resetFilters" class="flex-grow flex items-center justify-center gap-2 bg-gradient-to-r from-brand-primary to-brand-accent text-white font-bold py-3 px-6 rounded-xl hover:opacity-90 transition-all shadow-lg hover:shadow-brand-primary/30">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5M20 20v-5h-5M4 4l16 16"></path></svg>
                    Reset Filters
                </button>
                <div id="viewToggle" class="flex-grow flex items-center justify-center gap-2 bg-gray-700 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition-all cursor-pointer shadow-lg">
                    <svg id="viewIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                    <span id="viewText">Card View</span>
                </div>
            </div>
        </div>
        
        <div class="mt-4 pt-4 border-t border-gray-700/50">
            <div class="flex items-center gap-4">
                <label class="flex items-center gap-2 cursor-pointer text-sm text-gray-300 hover:text-white transition-colors">
                    <div id="showImagesToggle" class="custom-checkbox checked"></div>
                    <span>Show Images</span>
                </label>
                <label class="flex items-center gap-2 cursor-pointer text-sm text-gray-300 hover:text-white transition-colors">
                    <div id="showTierColorsToggle" class="custom-checkbox checked"></div>
                    <span>Tier Colors</span>
                </label>
            </div>
        </div>
    </div>

    <main id="content-area">
        <div id="tableView" class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl overflow-hidden border border-gray-700">
            <div class="overflow-x-auto">
                <table id="carTable" class="w-full whitespace-nowrap">
                    <thead class="bg-gray-900/80 text-left text-sm uppercase backdrop-blur-sm">
                        <tr>
                            <th data-column="name" data-type="string" class="p-4 font-semibold text-brand-primary tracking-wider cursor-pointer select-none hover:bg-gray-800 transition-colors">Vehicle</th>
                            <th data-column="price" data-type="number" class="p-4 font-semibold text-brand-primary tracking-wider cursor-pointer select-none hover:bg-gray-800 transition-colors">Price</th>
                            <th data-column="manufacturer" data-type="string" class="p-4 font-semibold text-brand-primary tracking-wider cursor-pointer select-none hover:bg-gray-800 transition-colors">Brand</th>
                            <th data-column="category" data-type="string" class="p-4 font-semibold text-brand-primary tracking-wider cursor-pointer select-none hover:bg-gray-800 transition-colors">Category</th>
                            <th data-column="tier" data-type="string" class="p-4 font-semibold text-brand-primary tracking-wider cursor-pointer select-none hover:bg-gray-800 transition-colors">Tier</th>
                            <th data-column="speed" data-type="number" class="p-4 font-semibold text-brand-primary tracking-wider cursor-pointer select-none hover:bg-gray-800 transition-colors">Speed</th>
                            <th data-column="accel" data-type="number" class="p-4 font-semibold text-brand-primary tracking-wider cursor-pointer select-none hover:bg-gray-800 transition-colors">0-60</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-700/50">
                        <!-- Table rows will be inserted here by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="cardView" class="hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Cards will be inserted here by JavaScript -->
        </div>

        <div id="noResults" class="hidden text-center py-20 animate__animated animate__fadeIn">
            <div class="max-w-md mx-auto">
                <svg class="mx-auto h-16 w-16 text-gray-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path vector-effect="non-scaling-stroke" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <h3 class="mt-2 text-2xl font-medium text-gray-300">No vehicles found</h3>
                <p class="mt-3 text-gray-500">Try adjusting your search or filter criteria.</p>
                <button id="resetFiltersNoResults" class="mt-6 inline-flex items-center gap-2 bg-brand-primary text-white font-medium py-2.5 px-6 rounded-lg hover:bg-brand-primary-hover transition-colors shadow">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5M20 20v-5h-5M4 4l16 16"></path></svg>
                    Reset Filters
                </button>
            </div>
        </div>
        
        <div id="loadingIndicator" class="hidden text-center py-16">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary"></div>
            <p class="mt-4 text-gray-400">Loading vehicles...</p>
        </div>
    </main>

    <footer class="text-center text-gray-500 text-sm mt-16 pb-8">
        <div class="mb-4">
            <div class="inline-flex gap-4">
                <a href="#" class="text-gray-400 hover:text-brand-primary transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                </a>
                <a href="#" class="text-gray-400 hover:text-brand-primary transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"/></svg>
                </a>
                <a href="#" class="text-gray-400 hover:text-brand-primary transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg>
                </a>
                <a href="#" class="text-gray-400 hover:text-brand-primary transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
                </a>
            </div>
        </div>
        <p>&copy; 2025 Driving Empire Value List 3.0 | Community-powered database</p>
        <p class="text-xs mt-2 text-gray-600">All vehicle data is collected from community sources and may not reflect in-game values exactly.</p>
    </footer>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    // --- CAR DATA (Updated with your images) ---
    const allCars = [
        { "name": "Audi A4 (2013)", "price": 30000, "manufacturer": "Audi", "category": "Licensed", "tier": "Entry", "speed": 130, "accel": 7.5, "img": "https://images.unsplash.com/photo-1594394017772-e87747864197?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Audi RS 7 Sportback (2021)", "price": 107000, "manufacturer": "Audi", "category": "Licensed", "tier": "Entry", "speed": 190, "accel": 3.5, "img": "https://images.unsplash.com/photo-1629867909335-515433100236?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "BMW 328i (2015)", "price": 28000, "manufacturer": "BMW", "category": "Licensed", "tier": "Entry", "speed": 130, "accel": 7.3, "img": "https://images.unsplash.com/photo-1580479155700-117565d78a87?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Ford Mustang GT (2017)", "price": 45000, "manufacturer": "Ford", "category": "Licensed", "tier": "Entry", "speed": 155, "accel": 4.5, "img": "https://images.unsplash.com/photo-1542282088-75b25330f81d?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Honda Civic (2018)", "price": 25000, "manufacturer": "Honda", "category": "Licensed", "tier": "Entry", "speed": 125, "accel": 7.7, "img": "https://images.unsplash.com/photo-1580479155700-117565d78a87?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Tesla Model 3 (2020)", "price": 60000, "manufacturer": "Tesla", "category": "Licensed", "tier": "Entry", "speed": 145, "accel": 3.2, "img": "https://images.unsplash.com/photo-1593282245366-231908428801?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Volkswagen Golf GTI (2020)", "price": 35000, "manufacturer": "Volkswagen", "category": "Licensed", "tier": "Entry", "speed": 130, "accel": 6.2, "img": "https://images.unsplash.com/photo-1610940381504-187515320c24?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Nissan 370Z (2009)", "price": 50000, "manufacturer": "Nissan", "category": "Licensed", "tier": "Entry", "speed": 155, "accel": 5, "img": "https://images.unsplash.com/photo-1589345094626-d62153216892?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "McLaren 720S", "price": 275000, "manufacturer": "McLaren", "category": "Licensed", "tier": "A-Tier", "speed": 212, "accel": 2.8, "img": "https://images.unsplash.com/photo-1605559424843-9ee8c4a45695?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Lamborghini HuracÃ¡n Performante", "price": 350000, "manufacturer": "Lamborghini", "category": "Licensed", "tier": "A-Tier", "speed": 202, "accel": 2.9, "img": "https://images.unsplash.com/photo-1583121274640-3023e4141695?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Porsche 911 GT3 RS (2022)", "price": 300000, "manufacturer": "Porsche", "category": "Licensed", "tier": "A-Tier", "speed": 198, "accel": 3, "img": "https://images.unsplash.com/photo-1616450616830-5895781a539b?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Ferrari F8 Tributo", "price": 400000, "manufacturer": "Ferrari", "category": "Licensed", "tier": "A-Tier", "speed": 211, "accel": 2.9, "img": "https://images.unsplash.com/photo-1601053073010-090409a8f4c7?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Aston Martin Vantage (2020)", "price": 200000, "manufacturer": "Aston Martin", "category": "Licensed", "tier": "A-Tier", "speed": 195, "accel": 3.6, "img": "https://images.unsplash.com/photo-1603584174092-498c19985952?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Bentley Continental GT (2020)", "price": 450000, "manufacturer": "Bentley", "category": "Licensed", "tier": "A-Tier", "speed": 198, "accel": 3.9, "img": "https://images.unsplash.com/photo-1628172948777-669b35e8e3c1?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Audi R8 V10 (2019)", "price": 350000, "manufacturer": "Audi", "category": "Licensed", "tier": "A-Tier", "speed": 205, "accel": 3.2, "img": "https://images.unsplash.com/photo-1594394017772-e87747864197?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Mercedes-AMG GT R (2018)", "price": 375000, "manufacturer": "Mercedes-Benz", "category": "Licensed", "tier": "A-Tier", "speed": 198, "accel": 3.5, "img": "https://images.unsplash.com/photo-1617470953151-ad095594b2a3?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "McLaren 765LT", "price": 775000, "manufacturer": "McLaren", "category": "Licensed", "tier": "S-Tier", "speed": 205, "accel": 2.7, "img": "https://images.unsplash.com/photo-1605559424843-9ee8c4a45695?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Porsche Taycan Turbo S (2021)", "price": 1000000, "manufacturer": "Porsche", "category": "Licensed", "tier": "S-Tier", "speed": 161, "accel": 2.4, "img": "https://images.unsplash.com/photo-1628574163013-0e8c0b5e5f3f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Ferrari 812 Superfast", "price": 1200000, "manufacturer": "Ferrari", "category": "Licensed", "tier": "S-Tier", "speed": 211, "accel": 2.9, "img": "https://images.unsplash.com/photo-1601053073010-090409a8f4c7?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Lamborghini Aventador SVJ", "price": 1400000, "manufacturer": "Lamborghini", "category": "Licensed", "tier": "S-Tier", "speed": 217, "accel": 2.8, "img": "https://images.unsplash.com/photo-1583121274640-3023e4141695?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Audi RS Q8 (2020)", "price": 550000, "manufacturer": "Audi", "category": "Licensed", "tier": "S-Tier", "speed": 190, "accel": 3.5, "img": "https://images.unsplash.com/photo-1629867909335-515433100236?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Rolls-Royce Cullinan (2020)", "price": 1200000, "manufacturer": "Rolls-Royce", "category": "Licensed", "tier": "S-Tier", "speed": 155, "accel": 5.2, "img": "https://images.unsplash.com/photo-1602796123985-027581b212f7?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Bugatti Chiron (2016)", "price": 1450000, "manufacturer": "Bugatti", "category": "Licensed", "tier": "S-Tier", "speed": 261, "accel": 2.4, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Koenigsegg Agera RS", "price": 1300000, "manufacturer": "Koenigsegg", "category": "Licensed", "tier": "S-Tier", "speed": 273, "accel": 2.6, "img": "https://images.unsplash.com/photo-1601053073010-090409a8f4c7?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "SSC Tuatara (2020)", "price": 3100000, "manufacturer": "SSC", "category": "Licensed", "tier": "Hypercar", "speed": 282, "accel": 2.5, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Hennessey Venom F5 (2021)", "price": 5000000, "manufacturer": "Hennessey", "category": "Licensed", "tier": "Hypercar", "speed": 301, "accel": 2, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Pagani Huayra (2012)", "price": 2700000, "manufacturer": "Pagani", "category": "Licensed", "tier": "Hypercar", "speed": 238, "accel": 2.8, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Bugatti Veyron (2005)", "price": 4800000, "manufacturer": "Bugatti", "category": "Licensed", "tier": "Hypercar", "speed": 267, "accel": 2.4, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Koenigsegg Jesko (2020)", "price": 4900000, "manufacturer": "Koenigsegg", "category": "Licensed", "tier": "Hypercar", "speed": 300, "accel": 2.5, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Ferrari LaFerrari (2013)", "price": 2000000, "manufacturer": "Ferrari", "category": "Licensed", "tier": "Hypercar", "speed": 217, "accel": 2.6, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Lamborghini Sian (2020)", "price": 3500000, "manufacturer": "Lamborghini", "category": "Licensed", "tier": "Hypercar", "speed": 217, "accel": 2.8, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Rimac Nevera (2021)", "price": 2800000, "manufacturer": "Rimac", "category": "Licensed", "tier": "Hypercar", "speed": 258, "accel": 1.8, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Roblox Race Car (2012)", "price": 20000000, "manufacturer": "Roblox (Event)", "category": "Event Exclusive", "tier": "Ultra-Rare", "speed": 310, "accel": 1.9, "img": "https://i.ytimg.com/vi/lpUHbT2Rz1c/maxresdefault.jpg" },
        { "name": "McLaren F1 (1993)", "price": 20000000, "manufacturer": "McLaren", "category": "Licensed", "tier": "Ultra-Rare", "speed": 240, "accel": 3.2, "img": "https://tse1.mm.bing.net/th/id/OIP.DLCTvI8EEkFzJngIp2r4fAAAAA?pid=Api&P=0&h=220" },
        { "name": "Devel Sixteen (2024)", "price": 12000000, "manufacturer": "Devel", "category": "Limited", "tier": "Ultra-Rare", "speed": 310, "accel": 1.8, "img": "https://tse3.mm.bing.net/th/id/OIP.PMaabGNHZ3iLeKzVP9-DbAHaEC?pid=Api&P=0&h=220" },
        { "name": "Ferrari FXX K Evo (2015)", "price": 7000000, "manufacturer": "Ferrari", "category": "Limited", "tier": "Ultra-Rare", "speed": 217, "accel": 2.5, "img": "https://tse4.mm.bing.net/th/id/OIP.xOqXpYc2EAYntJkZOVYMnwHaEK?pid=Api&P=0&h=220" },
        { "name": "Bugatti Divo (2018)", "price": 6500000, "manufacturer": "Bugatti", "category": "Limited", "tier": "Ultra-Rare", "speed": 236, "accel": 2.4, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Koenigsegg One:1 (2014)", "price": 6000000, "manufacturer": "Koenigsegg", "category": "Limited", "tier": "Ultra-Rare", "speed": 273, "accel": 2.8, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Lamborghini Veneno (2013)", "price": 5500000, "manufacturer": "Lamborghini", "category": "Limited", "tier": "Ultra-Rare", "speed": 221, "accel": 2.9, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" },
        { "name": "Hennessey Venom GT (2011)", "price": 5200000, "manufacturer": "Hennessey", "category": "Limited", "tier": "Ultra-Rare", "speed": 270, "accel": 2.2, "img": "https://images.unsplash.com/photo-1621250269096-d80582d1c68f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" }
    ];

    // --- DOM ELEMENT SELECTORS ---
    const tableBody = document.querySelector("#carTable tbody");
    const cardViewContainer = document.getElementById("cardView");
    const searchInput = document.getElementById("searchInput");
    const manufacturerFilter = document.getElementById("manufacturerFilter");
    const categoryFilter = document.getElementById("categoryFilter");
    const tierFilter = document.getElementById("tierFilter");
    const priceRange = document.getElementById("priceRange");
    const priceValue = document.getElementById("priceValue");
    const resetFiltersBtn = document.getElementById("resetFilters");
    const resetFiltersNoResults = document.getElementById("resetFiltersNoResults");
    const noResultsEl = document.getElementById("noResults");
    const headers = document.querySelectorAll("#carTable th");
    const viewToggle = document.getElementById("viewToggle");
    const tableView = document.getElementById("tableView");
    const loadingIndicator = document.getElementById("loadingIndicator");
    const showImagesToggle = document.getElementById("showImagesToggle");
    const showTierColorsToggle = document.getElementById("showTierColorsToggle");
    
    // Stats selectors
    const statVisibleCars = document.getElementById('statVisibleCars');
    const statAvgPrice = document.getElementById('statAvgPrice');
    const statTopSpeed = document.getElementById('statTopSpeed');
    const statQuickestAccel = document.getElementById('statQuickestAccel');

    // --- STATE MANAGEMENT ---
    let currentSort = { column: 'price', direction: 'desc' };
    let currentView = 'table'; // 'table' or 'card'
    let showImages = true;
    let showTierColors = true;

    // --- INITIALIZATION ---
    function initialize() {
        // Show loading indicator initially
        loadingIndicator.classList.remove('hidden');
        
        // Simulate loading delay
        setTimeout(() => {
            populateFilters(allCars);
            applyFiltersAndRender();
            setupEventListeners();
            loadingIndicator.classList.add('hidden');
        }, 800);
    }

    function populateFilters(cars) {
        const manufacturers = [...new Set(cars.map(car => car.manufacturer))].sort();
        const categories = [...new Set(cars.map(car => car.category))].sort();
        const tiers = [...new Set(cars.map(car => car.tier))].sort();

        populateSelect(manufacturerFilter, manufacturers);
        populateSelect(categoryFilter, categories);
        populateSelect(tierFilter, tiers);
        
        const maxPrice = Math.max(...cars.map(c => c.price));
        priceRange.max = maxPrice;
        priceRange.value = maxPrice;
        priceValue.textContent = '$' + parseInt(maxPrice).toLocaleString();
    }

    function populateSelect(selectElement, items) {
        items.forEach(item => {
            const option = document.createElement('option');
            option.value = item;
            option.textContent = item;
            selectElement.appendChild(option);
        });
    }

    // --- EVENT LISTENERS ---
    function setupEventListeners() {
        searchInput.addEventListener("input", applyFiltersAndRender);
        manufacturerFilter.addEventListener("change", applyFiltersAndRender);
        categoryFilter.addEventListener("change", applyFiltersAndRender);
        tierFilter.addEventListener("change", applyFiltersAndRender);
        
        priceRange.addEventListener("input", () => {
             priceValue.textContent = '$' + parseInt(priceRange.value).toLocaleString();
        });
        priceRange.addEventListener("change", applyFiltersAndRender);

        resetFiltersBtn.addEventListener("click", resetFilters);
        resetFiltersNoResults.addEventListener("click", resetFilters);
        
        viewToggle.addEventListener('click', toggleView);
        
        showImagesToggle.addEventListener('click', () => {
            showImages = !showImages;
            showImagesToggle.classList.toggle('checked');
            applyFiltersAndRender();
        });
        
        showTierColorsToggle.addEventListener('click', () => {
            showTierColors = !showTierColors;
            showTierColorsToggle.classList.toggle('checked');
            applyFiltersAndRender();
        });

        headers.forEach(header => {
            header.addEventListener("click", () => {
                const column = header.dataset.column;
                if (!column) return;
                const type = header.dataset.type;
                if (currentSort.column === column) {
                    currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
                } else {
                    currentSort.column = column;
                    currentSort.direction = type === 'number' ? 'desc' : 'asc';
                }
                applyFiltersAndRender();
            });
        });
    }

    // --- FILTERING & SORTING ---
    function getProcessedCars() {
        const searchText = searchInput.value.toLowerCase();
        const selectedManufacturer = manufacturerFilter.value;
        const selectedCategory = categoryFilter.value;
        const selectedTier = tierFilter.value;
        const maxPrice = parseInt(priceRange.value);

        // Filter
        const filtered = allCars.filter(car => {
            const matchesSearch = searchText === '' || 
                car.name.toLowerCase().includes(searchText) || 
                car.manufacturer.toLowerCase().includes(searchText) ||
                car.tier.toLowerCase().includes(searchText);
            const matchesManufacturer = selectedManufacturer === '' || car.manufacturer === selectedManufacturer;
            const matchesCategory = selectedCategory === '' || car.category === selectedCategory;
            const matchesTier = selectedTier === '' || car.tier === selectedTier;
            const matchesPrice = car.price <= maxPrice;
            return matchesSearch && matchesManufacturer && matchesCategory && matchesTier && matchesPrice;
        });

        // Sort
        const { column, direction } = currentSort;
        const modifier = direction === 'asc' ? 1 : -1;
        const sorted = [...filtered].sort((a, b) => {
            const valA = a[column];
            const valB = b[column];
            if (typeof valA === 'string') {
                return valA.localeCompare(valB) * modifier;
            } else {
                if (valA < valB) return -1 * modifier;
                if (valA > valB) return 1 * modifier;
                return 0;
            }
        });
        
        return sorted;
    }

    // --- RENDERING ---
    function renderTable(cars) {
        tableView.classList.remove('hidden');
        cardViewContainer.classList.add('hidden');
        tableBody.innerHTML = "";
        
        if (cars.length === 0) {
            noResultsEl.classList.remove('hidden');
            tableView.classList.add('hidden');
            return;
        }
        
        const fragment = document.createDocumentFragment();
        cars.forEach(car => {
            const row = document.createElement("tr");
            row.className = "bg-gray-800 hover:bg-gray-700/50 transition-colors duration-200 table-row-hover";
            
            // Determine tier color class
            let tierClass = '';
            if (showTierColors) {
                if (car.tier.includes('Entry')) tierClass = 'tier-entry';
                else if (car.tier.includes('A-Tier')) tierClass = 'tier-a';
                else if (car.tier.includes('S-Tier')) tierClass = 'tier-s';
                else if (car.tier.includes('Hypercar')) tierClass = 'tier-hypercar';
                else if (car.tier.includes('Ultra-Rare')) tierClass = 'tier-ultra';
            }
            
            row.innerHTML = `
                <td class="p-4 flex items-center gap-4">
                    ${showImages ? `<div class="img-hover-zoom w-24 h-14 rounded-lg shadow-lg overflow-hidden">
                        <img src="${car.img}" alt="${car.name}" class="w-full h-full object-cover" loading="lazy" onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1517056637305-b040e3f0545f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&ixlib=rb-4.0.3&q=80&w=400';">
                    </div>` : ''}
                    <span class="font-semibold text-white">${car.name}</span>
                </td>
                <td class="p-4 font-mono font-bold text-brand-accent">$${car.price.toLocaleString()}</td>
                <td class="p-4 text-gray-300">${car.manufacturer}</td>
                <td class="p-4 text-gray-300">${car.category}</td>
                <td class="p-4 ${tierClass}">${car.tier}</td>
                <td class="p-4 speedometer">${car.speed} <span class="text-xs text-brand-secondary/80">mph</span></td>
                <td class="p-4 text-gray-300">${car.accel}<span class="text-xs text-gray-500">s</span></td>
            `;
            fragment.appendChild(row);
        });
        tableBody.appendChild(fragment);
    }

    function renderCards(cars) {
        tableView.classList.add('hidden');
        cardViewContainer.classList.remove('hidden');
        cardViewContainer.innerHTML = "";
        
        if (cars.length === 0) {
            noResultsEl.classList.remove('hidden');
            cardViewContainer.classList.add('hidden');
            return;
        }
        
        const fragment = document.createDocumentFragment();
        cars.forEach(car => {
            // Determine tier color class
            let tierClass = 'bg-gray-700';
            if (showTierColors) {
                if (car.tier.includes('Entry')) tierClass = 'tier-entry';
                else if (car.tier.includes('A-Tier')) tierClass = 'tier-a';
                else if (car.tier.includes('S-Tier')) tierClass = 'tier-s';
                else if (car.tier.includes('Hypercar')) tierClass = 'tier-hypercar';
                else if (car.tier.includes('Ultra-Rare')) tierClass = 'tier-ultra';
            }
            
            // Add neon border for ultra rare cars
            const isUltraRare = car.tier.includes('Ultra-Rare');
            const cardClasses = `bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-xl overflow-hidden border border-gray-700 transform hover:-translate-y-2 transition-all duration-300 card-shine hover:shadow-xl hover:shadow-brand-primary/10 ${isUltraRare ? 'neon-border' : ''}`;
            
            const card = document.createElement("div");
            card.className = cardClasses;
            card.innerHTML = `
                ${showImages ? `<div class="img-hover-zoom w-full h-48 overflow-hidden">
                    <img src="${car.img}" alt="${car.name}" class="w-full h-full object-cover transition-transform duration-500" loading="lazy" onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1517056637305-b040e3f0545f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&ixlib=rb-4.0.3&q=80&w=400';">
                </div>` : ''}
                <div class="p-5">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-bold text-lg text-white truncate">${car.name}</h3>
                        <span class="text-xs text-gray-400">${car.manufacturer}</span>
                    </div>
                    
                    <div class="flex justify-between items-center mb-4">
                        <div class="price-tag">$${car.price.toLocaleString()}</div>
                        <span class="${tierClass} tier-badge">${car.tier}</span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-gray-700/30 p-3 rounded-lg border border-gray-600/30">
                            <div class="flex items-center gap-2">
                                <svg class="w-5 h-5 text-brand-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                <span class="text-xs text-gray-400">Speed</span>
                            </div>
                            <p class="mt-1 font-semibold text-white">${car.speed} <span class="text-xs text-gray-400">mph</span></p>
                        </div>
                        <div class="bg-gray-700/30 p-3 rounded-lg border border-gray-600/30">
                            <div class="flex items-center gap-2">
                                <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                                <span class="text-xs text-gray-400">0-60</span>
                            </div>
                            <p class="mt-1 font-semibold text-white">${car.accel}<span class="text-xs text-gray-400">s</span></p>
                        </div>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-700/50">
                        <span class="text-xs text-gray-400">Category</span>
                        <p class="text-sm font-medium text-white">${car.category}</p>
                    </div>
                </div>
            `;
            fragment.appendChild(card);
        });
        cardViewContainer.appendChild(fragment);
    }
    
    // --- UI UPDATES & UTILITIES ---
    function applyFiltersAndRender() {
        const processedCars = getProcessedCars();
        
        if (processedCars.length === 0) {
            noResultsEl.classList.remove('hidden');
            tableView.classList.add('hidden');
            cardViewContainer.classList.add('hidden');
        } else {
            noResultsEl.classList.add('hidden');
            if(currentView === 'table') {
                renderTable(processedCars);
            } else {
                renderCards(processedCars);
            }
        }
        updateStats(processedCars);
        updateSortIndicators();
    }

    function updateSortIndicators() {
        headers.forEach(header => {
            const column = header.dataset.column;
            if(!column) return;
            
            // Remove all indicators first
            let indicator = header.querySelector('.sort-indicator');
            if (indicator) indicator.remove();
            
            // Remove active class from all headers
            header.classList.remove('bg-gray-800', 'text-white');
            header.classList.add('text-brand-primary');

            // Add active class and indicator to current sort column
            if (column === currentSort.column) {
                header.classList.remove('text-brand-primary');
                header.classList.add('bg-gray-800', 'text-white');
                
                indicator = document.createElement('span');
                indicator.className = 'sort-indicator ml-2';
                indicator.innerHTML = currentSort.direction === 'asc' ? 
                    '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>' : 
                    '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>';
                header.appendChild(indicator);
            }
        });
    }

    function updateStats(cars) {
        statVisibleCars.textContent = cars.length;

        if (cars.length === 0) {
            statAvgPrice.textContent = "$0";
            statTopSpeed.textContent = "0 mph";
            statQuickestAccel.textContent = "0s";
            return;
        }

        const totalValue = cars.reduce((sum, car) => sum + car.price, 0);
        statAvgPrice.textContent = '$' + Math.round(totalValue / cars.length).toLocaleString();

        const topSpeedCar = cars.reduce((prev, current) => (prev.speed > current.speed) ? prev : current);
        statTopSpeed.innerHTML = `${topSpeedCar.speed} <span class="text-lg text-brand-secondary/80">mph</span><span class="block text-xs text-gray-500 truncate">${topSpeedCar.name}</span>`;
        
        const quickestCar = cars.reduce((prev, current) => (prev.accel < current.accel) ? prev : current);
        statQuickestAccel.innerHTML = `${quickestCar.accel}<span class="text-lg text-gray-400">s</span><span class="block text-xs text-gray-500 truncate">${quickestCar.name}</span>`;
    }

    function resetFilters() {
        searchInput.value = '';
        manufacturerFilter.value = '';
        categoryFilter.value = '';
        tierFilter.value = '';
        priceRange.value = priceRange.max;
        priceValue.textContent = '$' + parseInt(priceRange.max).toLocaleString();
        
        currentSort = { column: 'price', direction: 'desc' }; // Reset sort
        applyFiltersAndRender();
    }
    
    function toggleView() {
        currentView = currentView === 'table' ? 'card' : 'table';
        const viewIcon = document.getElementById('viewIcon');
        const viewText = document.getElementById('viewText');

        if(currentView === 'card') {
            viewIcon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>`; // Grid icon
            viewText.textContent = "Table View";
        } else {
            viewIcon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>`; // List icon
            viewText.textContent = "Card View";
        }
        applyFiltersAndRender(); // Re-render to apply the new view
    }

    // Initialize the page
    initialize();
});
</script>
</body>
</html>
